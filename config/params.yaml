# Core parameters
assignment_date: "2025-09-01"          # yyyy-mm-dd
preperiod_months: 24
pre_buffer_days: 14

# Eligibility
sfh_min_addresses: 2                   # keep segments with >= N SFH addresses snapped nearby
addr_buffer_meters: 40                 # snap radius for address-to-segment counts
sr_snap_meters: 30                     # snap radius for service requests to segments
segment_id_field: ""                   # leave blank to auto-detect (e.g., SEGMENT_ID, SEGMENTID, STREETSEGID)

# ID
segment_id_field: "iamfloc"

fields:
  streets_segment_id: iamfloc   # street-segment ID
  addresses_id: addr_id        # unique ID in addrapn_datasd.shp
  addresses_text: FULLADDR      # human-readable full address in addrapn_datasd.shp

# PCI
pci_observed_date: "2023-12-31"
pci_bands: [0, 40, 60, 80, 101]       # edges for bands: [0–39, 40–59, 60–79, 80–100]

# land use
sfh_parcel_field: "ASR_LANDUS"
sfh_values: [11, 110, 111]

# mapping display
map_max_address_points: 20000

# Randomization & sims
treat_share: 0.05
segment_id_field: "iamfloc"        # ✅ (matches your streets)
R_draws: 2000                      # simulations per scheme
ra_r2_guess: 0.20                  # regression-adjustment guess for S2
pci_bands: [0, 40, 60, 80, 101]    # bands used in the report

seed: 20250812

# Regression adjustment (S2 analysis)
ra_r2_guess: 0.20

# Survey MDE grid (completes per night × nights)
survey_completes_per_night:
  low: 120
  base: 180
  high: 240
nights: 30

crs:
  working_meters: 26911    # UTM 11N (meters) for San Diego
  output_wgs84: 4326       # lat/lon for GeoJSON/CSV
map:
  zoom_start: 12

# Zoning and Community Planning District filters
filters:
  zoning:
    mode: "include"          # "include", "exclude", or "off"
    codes_list: ["RS-1-2", "RS-1-3", "RS-1-4", "RS-1-5", "RS-1-6", "RS-1-7", "RS-1-8", "RS-1-9", "RS-1-10", "RS-1-11", "RS-1-12", "RS-1-13", "RS-1-14", "RM-1-1"]     # OR use codes_csv: "/path/zoning_codes.csv"
    code_field: "zone_name"            # optional override; else auto-detect
    drop_if_no_zoning: true  # if an address doesn’t hit a zoning polygon, keep it (false) or drop it (true)

  cpd: # community planning districts
    exclude_list: ["Military Facilities", "Linda Vista"]   # Linda Vista = pilot area, must exclude
    name_field: "cpname"            # optional override; else auto-detect
    drop_if_no_cpd: true     # if an address doesn't hit a CPD polygon, keep it (false) or drop it (true)


# Output paths
outputs:
  eligible: outputs/eligible_segments.parquet
  assignments: outputs/t1_assignment_master.csv
  sim_balance: outputs/sim_balance.csv
  sim_precision: outputs/sim_precision.csv
  report_md: outputs/strat_sim_report.md
  report_pdf: outputs/strat_sim_report.pdf
